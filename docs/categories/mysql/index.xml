<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mysql on focaaby&#39;s Note</title>
    <link>/categories/mysql/</link>
    <description>Recent content in Mysql on focaaby&#39;s Note</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 31 Mar 2018 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="/categories/mysql/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>After Migrating MySQL to MariaDB, AppArmor blocks MariaDB</title>
      <link>/blog/after-migrating-mysql-to-mariadb/</link>
      <pubDate>Sat, 31 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/blog/after-migrating-mysql-to-mariadb/</guid>
      <description>前言 繼上篇移轉 MySQL 至 MariaDB 成功後都尚未重開伺服器過，重起之後發現 DB 持續無法正常開始運作。
檢查 log MariaDB 的 error log 於 syslog。
cat /var/log/syslog.1 | grep mysql  找到錯誤部分
Mar 30 17:24:51 host mysqld[1274]: Version: &#39;10.2.14-MariaDB-10.2.14+maria~xenial-log&#39; socket: &#39;/var/run/mysqld/mysqld.sock&#39; port: 3306 mariadb.org binary distribution Mar 30 17:24:51 host kernel: [ 28.492966] audit: type=1400 audit(1522401891.184:11): apparmor=&amp;quot;DENIED&amp;quot; operation=&amp;quot;sendmsg&amp;quot; info=&amp;quot;Failed name lookup - disconnected path&amp;quot; error=-13 profile=&amp;quot;/usr/sbin/mysqld&amp;quot; name=&amp;quot;run/systemd/notify&amp;quot; pid=1274 comm=&amp;quot;mysqld&amp;quot; requested_mask=&amp;quot;w&amp;quot; denied_mask=&amp;quot;w&amp;quot; fsuid=105 ouid=0 Mar 30 17:25:24 host mysqld[1274]: 2018-03-30 17:25:24 139927115249408 [Note] InnoDB: Buffer pool(s) load completed at 180330 17:25:24 Mar 30 17:26:11 host mysqld[1274]: 2018-03-30 17:26:11 139928163120896 [Note] /usr/sbin/mysqld (initiated by: unknown): Normal shutdown Mar 30 17:26:11 host mysqld[1274]: 2018-03-30 17:26:11 139928163120896 [Note] Event Scheduler: Purging the queue.</description>
    </item>
    
    <item>
      <title>Migrating MySQL 5.7 to MariaDB 10.2</title>
      <link>/blog/migrating-mysql-2-mariadb/</link>
      <pubDate>Mon, 19 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/blog/migrating-mysql-2-mariadb/</guid>
      <description>記錄一下把 MySQL 移植更新至 MariaDB 10.2
動手做 備份 先備份所有的資料及設定黨
 mysqldump -u &amp;lt;user&amp;gt; -p --all-databases &amp;gt; all_databases.sql 備份 /var/lib/mysql 備份 /etc/mysql 的設定檔  刪除 MySQL 務必確定備份好資料後，再進行接下來的動作否則造成災難
 刪除 /var/lib/mysql 資料夾 sudo apt remove mysql mysql-server mysql-common  安裝 MariaDB 10.2 sudo apt-get install software-properties-common sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 sudo add-apt-repository &#39;deb [arch=amd64,i386,ppc64el] http://ftp.ubuntu-tw.org/mirror/mariadb/repo/10.2/ubuntu xenial main&#39; sudo apt update sudo apt install mariadb-server  mysql_upgrade 將原本資料還原到 MariaDB
mysql -u &amp;lt;user&amp;gt; -p &amp;lt; all_databases.</description>
    </item>
    
  </channel>
</rss>